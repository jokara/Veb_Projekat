<html>
	<head>
		<meta charset="utf-8"> <script src="js/linkovanja.js"></script>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="author" content="Colorlib">
		<meta name="description" content="#">
		<meta name="keywords" content="#">
		
		<title>Izaberi hranu</title>


			


		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="css/bootstrap.min.css">
		
		<!-- Simple line Icon -->
		<link rel="stylesheet" href="css/simple-line-icons.css">
		<!-- Themify Icon -->
		<link rel="stylesheet" href="css/themify-icons.css">
		<!-- Hover Effects -->
		<link rel="stylesheet" href="css/set1.css">
		<!-- Main CSS -->
		<link rel="stylesheet" href="css/style.css">
		
		<script>
		
			function filtriraj(){
				if(localStorage.getItem('primeni')!=1){
					var tip=localStorage.getItem("filter");
					//alert(tip);
						
						var h=[];
						var sl=[];
						var t=[];
						var op=[];
						var naziv=[];
						
						var num=0;
					if(tip!=null && tip!="sve"){
						
						for(var i=1;i<17;i++){
							var str='R'+i;
							
							var RIzLS = JSON.parse(localStorage.getItem(str));
							for(var j=0;j<RIzLS.vrsta.length;j++){
								//alert("tip: "+tip+" dohvatio: "+RIzLS.vrsta[j]);
								if(RIzLS.vrsta[j]==tip) {
									//alert(str);
									naziv[num]=RIzLS.naziv;
									h[num]=RIzLS.link;
									op[num]=RIzLS.opstina;
									t[num]=tip;
									sl[num]=RIzLS.slika;
									num++;
								}
							}
						}
						//alert(naziv);
					
					}
					else{
					
						if(tip=="sve"){
							for(var i=1;i<17;i++){
								var str='R'+i;
								
								var RIzLS = JSON.parse(localStorage.getItem(str));
								
								naziv[num]=RIzLS.naziv;
								h[num]=RIzLS.link;
								op[num]=RIzLS.opstina;
								t[num]=tip;
								sl[num]=RIzLS.slika;
								num++;
							}
							
						}
					
					}
					
					//localStorage.removeItem("filter");
					
					for(var i=0;i<num;i++){
						var html_fajl=h[i];
						var ime=naziv[i];
						var opstina=op[i];
						var vrsta=t[i];
						var slika=sl[i];
						
						//alert("<a href='"+html_fajl+"'><div class='mesta_wrapper'><div class='grid'><figure class='effect-ruby'><img src='"+slika+"' class='img-fluid'><figcaption><h5>"+ime+"</h5><p>"+vrsta+" - "+opstina+"</p></figcaption></figure></div></div></a>");
						var n=i+1;
						document.getElementById("r"+n).innerHTML="<a href='"+html_fajl+"'><div class='mesta_wrapper'><div class='grid'><figure class='effect-ruby'><img src='"+slika+"' class='img-fluid'><figcaption><h5>"+ime+"</h5><p>"+vrsta+" - "+opstina+"</p></figcaption></figure></div></div></a>";
					}
					//alert("gotovo");
				}
				else{
					localStorage.setItem('primeni',0);
					//alert('zove prikazi');
					prikazi(JSON.parse(localStorage.getItem('niz_za_prikaz')));
				
				}
			}
			
			
			function pronadji_poziciju(opstine,opstina){
				
				var x;
				
				for(var i=0;i<opstine.length;i++){
					if(opstine[i]==opstina) x=i;
				}
			
				return x;
			
			}
			
			
			function prilagodi(imena_json,opstine){
				var num=0;
				var novi=new Array();
				var imena=[];
				imena=JSON.parse(localStorage.getItem('niz_sa_imenima'));
				alert("duzina: "+ Object.keys(imena).length);
				for(var i=0;i<imena.length;i++){
					novi.push(i);
				}
				alert("imena: "+imena+" - novi: "+novi+" - opstine: "+opstine);
				for(var i=0;i<imena.length;i++){
					
					for(var j=1;j<17;j++){
						
						var str='R'+j;
								
						var RIzLS = JSON.parse(localStorage.getItem(str));
						if(RIzLS.naziv==imena[i]){
							opstina=RIzLS.opstina;
							alert("nasao opstinu "+opstina+" za restoran "+RIzLS.naziv);
						}
					}
					
					//u opstina imamo koja je opstina restoran imena[i]
					
					num=pronadji_poziciju(opstine,opstina);
					
					opstine[num]="*";
					
					novi[num]=imena[i];
					
					alert("imena: "+imena+" - novi: "+novi+" - opstine: "+opstine);
					
				}
				return novi;
					
			}
			
			
			function prikazi(izlistani_s){
				//var izlistani_imena=JSON.parse(localStorage.getItem('niz_sa_imenima'));//ta imena prilagoditi opstinama
				var pomocni_opstine=izlistani_s.slice();
				var izlistani_imena=prilagodi(localStorage.getItem('niz_sa_imenima'),pomocni_opstine);
				alert("niz sa imenima: "+izlistani_imena+" - niz sa opstina: "+izlistani_s);
				var num=0;
				var num_izlistani_s=0;
				var h=[];
				var sl=[];
				var t=[];
				var op=[];
				var ime=[];
				var prikaz=[];
				
				var tip=localStorage.getItem("filter");
				
				
				//alert("ceo niz: "+izlistani_s);
				//alert("nulti: "+izlistani_s[0]);
				//alert("while");
				while(num_izlistani_s!=izlistani_s.length){
					for(var i=1;i<17;i++){
						var str='R'+i;
						//alert("i="+i+", num_izlistani_s="+num_izlistani_s);
						
						var RIzLS = JSON.parse(localStorage.getItem(str));
						
						//alert("iz niza: "+izlistani_s[num_izlistani_s]);
						//alert("iz jsona: "+RIzLS.naziv);
						
						//alert("tip: "+tip+" dohvatio: "+RIzLS.vrsta[i]);
						//alert('poredjenje opstina: '+RIzLS.opstina+","+izlistani_s[num_izlistani_s]+' - poredjenje naziva: '+RIzLS.naziv+","+izlistani_imena[num_izlistani_s]);
						if((localStorage.getItem("vrsta_sorta")==1 && RIzLS.naziv==izlistani_s[num_izlistani_s])||(localStorage.getItem("vrsta_sorta")==2 && RIzLS.opstina==izlistani_s[num_izlistani_s] &&  RIzLS.naziv==izlistani_imena[num_izlistani_s])) {
							//alert("nasao"+RIzLS.naziv);
							ime[num_izlistani_s]=RIzLS.naziv;
							//alert(ime[num_izlistani_s]);
							h[num_izlistani_s]=RIzLS.link;
							//alert(h[num_izlistani_s]);
							op[num_izlistani_s]=RIzLS.opstina;
							//alert(op[num_izlistani_s]);
							t[num_izlistani_s]=tip;
							//alert(t[num_izlistani_s]);
							sl[num_izlistani_s]=RIzLS.slika;
							//alert(sl[num_izlistani_s]);
							num_izlistani_s++;
							//alert(ime[num_izlistani_s]+", "+h[num_izlistani_s]+", "+op[num_izlistani_s]+", "+t[num_izlistani_s]+", "+sl[num_izlistani_s]+", novi num_izlistani_s: "+num_izlistani_s);
							//i=20;
						}
						//alert("izasao iz if");
						//alert("dole-i="+i+", num_izlistani_s="+num_izlistani_s);
					}
					//alert("num_izlistani_s "+num_izlistani_s);
				}
				//alert("gotov while");
				//alert("num_izlistani_s "+num_izlistani_s);
				//alert("ime: "+ime);
				
				for(var i=0;i<num_izlistani_s;i++){
					//alert(i);
					var html_fajl=h[i];
					var ime_rest=ime[i];
					var opstina=op[i];
					var vrsta=t[i];
					var slika=sl[i];
					
					//alert("<a href='"+html_fajl+"'><div class='mesta_wrapper'><div class='grid'><figure class='effect-ruby'><img src='"+slika+"' class='img-fluid'><figcaption><h5>"+ime+"</h5><p>"+vrsta+" - "+opstina+"</p></figcaption></figure></div></div></a>");
					var n=i+1;
					document.getElementById("r"+n).innerHTML="<a href='"+html_fajl+"'><div class='mesta_wrapper'><div class='grid'><figure class='effect-ruby'><img src='"+slika+"' class='img-fluid'><figcaption><h5>"+ime_rest+"</h5><p>"+vrsta+" - "+opstina+"</p></figcaption></figure></div></div></a>";
					
				}
				//alert("prikazano");
			}
			
			
			function dohvati_izlistane_ime(){
				var tip=localStorage.getItem("filter");
				localStorage.setItem("vrsta_sorta",1);
				//alert(tip);
				
				var naziv=[];
					
				var num=0;
				if(tip!=null && tip!="sve"){
					
					for(var i=1;i<17;i++){
						var str='R'+i;
						
						var RIzLS = JSON.parse(localStorage.getItem(str));
						for(var j=0;j<RIzLS.vrsta.length;j++){
							//alert("tip: "+tip+" dohvatio: "+RIzLS.vrsta[j]);
							if(RIzLS.vrsta[j]==tip) {
								//alert(str);
								naziv[num]=RIzLS.naziv;
								num++;
							}
						}
					}
					//alert(naziv);
				
				}
				else{
				
					if(tip=="sve"){
						for(var i=1;i<17;i++){
							var str='R'+i;
							
							var RIzLS = JSON.parse(localStorage.getItem(str));
							
							naziv[num]=RIzLS.naziv;
							num++;
						}
						
					}
				
				}
				
				//localStorage.removeItem("filter");
				//alert(naziv);
				return naziv;
				//alert("gotovo");
			}
			
			function dohvati_izlistane_opstina(){
				var tip=localStorage.getItem("filter");
				localStorage.setItem("vrsta_sorta",2);
				//alert("tip: "+tip);
				
				var opstina=[];
				var naziv=[];
					
				var num=0;
				if(tip!=null && tip!="sve"){
					
					for(var i=1;i<17;i++){
						var str='R'+i;
						
						var RIzLS = JSON.parse(localStorage.getItem(str));
						for(var j=0;j<RIzLS.vrsta.length;j++){
							//alert("tip: "+tip+" dohvatio: "+RIzLS.vrsta[j]);
							if(RIzLS.vrsta[j]==tip) {
								//alert(str);
								opstina[num]=RIzLS.opstina;
								naziv[num]=RIzLS.naziv;
								num++;
							}
						}
					}
					//alert("dohvacen opstina: "+opstina);
				
				}
				else{
				
					if(tip=="sve"){
						for(var i=1;i<17;i++){
							var str='R'+i;
							
							var RIzLS = JSON.parse(localStorage.getItem(str));
							
							opstina[num]=RIzLS.opstina;
							num++;
						}
						
					}
				
				}
				
				//localStorage.removeItem("filter");
				
				//stavljanje naziva u ls
				
				var json_imena = JSON.stringify(naziv);
				localStorage.setItem('niz_sa_imenima',json_imena);
				
				return opstina;
				//alert("gotovo");
			}
			
			
			function primeni_filter(){
				var opstina=0;
				var ime=0;
				var ocena=0;
				
				var tip=localStorage.getItem("filter");
				
				if(document.pretraga_forma.opstina.checked) opstina=1;
				if(document.pretraga_forma.ime.checked) ime=1;
				if(document.pretraga_forma.ocena.checked) ocena=1;
				
				var izlistani=[];
				//alert(izlistani);
				
				var izlistani_s=[];
				
				//po imenu
				if(ime==1) {
					alert(tip);
					//izlistani=dohvati_izlistane_ime();
					//alert(izlistani);
					//izlistani_s=izlistani.sort();
				
				}
				
				//po opstini
				else if(opstina==1) {
					alert(tip);
					//alert('po opstini');
					//izlistani_ime=dohvati_izlistane_ime();
					//alert(izlistani_ime);
					//izlistani=dohvati_izlistane_opstina();
					///izlistani_s=izlistani.sort();
				}
				
				//po oceni
				else if(ocena==1) {
					alert(tip);
					//alert('po imenima');
					//izlistani=dohvati_izlistane_ocena();
					//alert(izlistani);
					//izlistani_s=izlistani.sort();
				}
				
				//alert('reverse');
				//alert("sortiran: "+izlistani_s);
				
				
				//var json = JSON.stringify(izlistani_s);
				
				//alert("za json: "+json);
				
				//localStorage.setItem('primeni',1);//treba resetovati nekad
				//localStorage.setItem('niz_za_prikaz',json);
				
				//alert("niz za prikaz: "+localStorage.getItem('niz_za_prikaz'));
				//window.open("filtriranje.html",'_self');
				//alert('prikazano');
			}
			
		
		</script>
		
		
		
	</head>

	<body onload="filtriraj()">
		<p id="sara"></p>
		<!--Zaglavlje stranice-->
		<div class="nav-menu">
			<div class="bg transition">
				<div class="container-fluid fixed">
					<div class="row">
						<div class="col-sm-12">
							<nav class="navbar navbar-expand-lg navbar-light">
								<a class="navbar-brand" href="index.html"><img src='images/flash_food.png' height='70' ></a>
								<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
					<span class="icon-menu"></span>
				  </button>
								<div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
									<ul class="navbar-nav">
										
									   
										<li class="nav-item dropdown">
											<a class="nav-link" href="#" id="navbarDropdownMenuLink2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						Opstine
						<span class="icon-arrow-down"></span>
					  </a>
											<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
												<a class="dropdown-item" href="#">Vračar</a>
												<a class="dropdown-item" href="#">Dorćol</a>
												<a class="dropdown-item" href="#">Novi Beograd</a>
												<a class="dropdown-item" href="#">Zvezdara</a>
											</div>
										</li>
										
										
										<li class="nav-item dropdown">
											<a class="nav-link" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						 O nama
						 <span class="icon-arrow-down"></span>
					   </a>
											<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
												<a class="dropdown-item" href="#">Tim autora</a>
												<a class="dropdown-item" href="#">Nagrade</a>
												<a class="dropdown-item" href="#">Spoznori</a>
												<a class="dropdown-item" href="#">Kontakt</a>
											</div>
										</li>
										
										<li class="nav-item active">
											<a class="nav-link" href="#">Dostava</a> 
										</li>
										
										<li class="nav-item active">
											<a class="nav-link" href="filtriranje_eng.html"><img src="images/eng.png" class="img-fluid" style="height: 35px;" /></a> 
										</li>
										
										
									</ul>
								</div>
							</nav>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Pretraga -->
		<section class="slider2 d-flex align-items-center">
			<!-- <img src="images/slider.jpg" class="img-fluid" alt="#"> -->
			<div class="container">
				<div class="row d-flex justify-content-center">
					<div class="col-sm-12 col-xs-12">
						<div class="slider-title_box">
							<div class="row">
								<div class="col-sm-12 col-xs-12" style="padding-top:90px;">
									<br>
										<h1><b>Najbolji izbor sajtova za poručivanje hrane</b></h1>
								</div>
								<div class="col-sm-12 com-xs-12">
									<h5><b>Pronađite najpopularnije restorane baš u vašoj blizini</b></h5>
								</div>
							</div>
							
						</div>
					</div>
				</div>
			</div>
		</section>
		
		
		<!--breadcrumbs-->
				
		<section class="glavni_deo light-bg">
		<br>
			<div class="container">
				<div class="row">
					<div class="offset-sm-5 col">
					
						<div class="btn-group btn-breadcrumb">
							<a href="index.html" class="btn btn-success">Home</a>
							<a href="#" class="btn btn-success"><p id="p1"></p></a>
							<!--<a href="#" class="btn btn-success"><p id="p2"></p></a>
							<a href="#" class="btn btn-success"><p id="p3"></p></a>-->
						</div>
					
					</div>
				</div>
			</div>
		</section>
		<br><br>
		
		
		<div class="container">
		
			<div class="row">
				<div class="col-sm-12 col-xs-12 pretraga" style="text-align:center">
					<b>Pretraga</b>
							
				</div>		
			</div>
			<br>
			
			<br>
			<div class="row">
				<!--filtriranje-->	
				<div class="col-sm-4 ">
					<div class="row">
					
						<div class="col-sm-12 col-xs-12 pretraga2" style="text-align:center">
							<b>Filtriraj</b>
								
						</div>
						<form name="pretraga_forma">
						<div class="col-sm-12 col-xs-12 filtriranje2"></div>
						<div class="col-sm-12 col-xs-12 filtriranje">
						
							<br>
							<h6>Sortiraj po opstini</h6>
							<br>
							<input type="radio" id="opstina" name='kriterijum'>
							<br>
						
						</div>
						<div class="col-sm-12 col-xs-12 filtriranje2"></div>
						<div class="col-sm-12 col-xs-12 filtriranje">
						
							<br>
							<h6>Sortiraj po imenu restorana</h6>
							<br>
							<input type="radio" id="ime" name='kriterijum'>
							<br>
						
						</div>
						<div class="col-sm-12 col-xs-12 filtriranje2"></div>
						<div class="col-sm-12 col-xs-12 filtriranje">
						
							<br>
							<h6>Sortiraj po oceni</h6>
							<br>
							<input type="radio" id="ocena" name='kriterijum'>
							<br>
						
						</div>
						
						
						<div class="col-sm-12 col-xs-12 filtriranje2"></div>
						<div class="col-sm-12 col-xs-12 filtriranje">
						
							<br>
							
								<button class="btn btn-light btn-outline-success" onclick="primeni_filter()">Primeni filter</button>
								
								
							
							
							<br>
						
						</div>
						<div class="col-sm-12 col-xs-12 filtriranje2"></div>
						</form>
						

					</div>
				
				</div>
				
				<!--filtriranje kraj-->
				<div class="col-sm-8 col-xs-8">
					<div class="row">
						<div class="col-sm-12 col-xs-12 pretraga2" style="text-align:center">
							<b>Rezultati pretrage</b>
								
						</div>
						
						<div class="col-sm-6 col-xs-6" id="r1">
							
						</div>
						<div class="col-sm-6 col-xs-6" id="r2">
							
						</div>
						<div class="col-sm-6 col-xs-6" id="r3">
							
						</div>
						<div class="col-sm-6 col-xs-6" id="r4">
							
						</div>
						<div class="col-sm-6 col-xs-6" id="r5">
							
						</div>
						<div class="col-sm-6 col-xs-6" id="r6">
							
						</div>
						<div class="col-sm-6 col-xs-6" id="r7">
							
						</div>
						<div class="col-sm-6 col-xs-6" id="r8">
							
						</div>
						<div class="col-sm-6 col-xs-6" id="r9">
							
						</div>
						<div class="col-sm-6 col-xs-6" id="r10">
							
						</div>
						<div class="col-sm-6 col-xs-6" id="r11">
							
						</div>
						<div class="col-sm-6 col-xs-6" id="r12">
							
						</div>
						<div class="col-sm-6 col-xs-6" id="r13">
							
						</div>
						<div class="col-sm-6 col-xs-6" id="r14">
							
						</div>
						<div class="col-sm-6 col-xs-6" id="r15">
							
						</div>
						<div class="col-sm-6 col-xs-6" id="r16">
							
						</div>
						
					
					</div>
				
				</div>
				
			</div>
		
		</div>
		
				
		<br><br>
	   
		<!--FOOTER-->
		<footer class="footer dark-bg">
			<div class="container">
				<div class="row">
					<div class="col-sm-12">
							
							<p>Copyright 2019, Nedeljko Jokić, Sara Milovanović, Odsek za softversko inženjerstvo Elektrotehničkog fakulteta Univerziteta u Beogradu</p>
						   
						  
					</div>
				</div>
			</div>
		</footer>
		<!--//END FOOTER -->

		<script src="js/jquery-3.2.1.min.js"></script>
		<script src="js/popper.min.js"></script>
		<script src="js/bootstrap.min.js"></script>

		<script>
			$(window).scroll(function() {
				// 100 = The point you would like to fade the nav in.

				if ($(window).scrollTop() > 100) {

					$('.fixed').addClass('is-sticky');

				} else {

					$('.fixed').removeClass('is-sticky');

				};
			});
		</script>
		
	

</html>
